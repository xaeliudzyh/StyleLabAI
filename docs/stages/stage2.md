**Курс:** «Виртуализация и облачные технологии»

**Студент:** Цаголов Георгий (СП МКН, 3 курс)

**Дата:** 19 мая 2025 г.

---

## 1. Требования, сформулированные на Этапе 1

| Категория        | Конкретная потребность                                       |
| ---------------- | ------------------------------------------------------------ |
| База данных      | Реляционная БД для анкет и истории рекомендаций              |
| Хранение файлов  | Объектное хранилище для изображений стрижек                  |
| Контейнеризация  | Оркестратор с горизонтальным масштабированием                |
| ML‑инференс      | Возможность запускать контейнер с моделью (GPU не требуется) |
| CI/CD            | Registry + API для автоматического деплоя                    |
| Бесплатный грант | Не менее 3 000 ₽ на 60 дней                                  |

---

## 2. Обзор кандидатов

| Провайдер                                                                         | + Плюсы                                  | − Минусы |
| --------------------------------------------------------------------------------- | ---------------------------------------- | -------- |
| **Yandex Cloud**                                                                  | • Русскоязычная документация и поддержка |          |
| • Грант 4 000 ₽ / 60 дней для студентов                                           |                                          |          |
| • Managed PostgreSQL, Object Storage (S3), Managed Kubernetes, Container Registry |                                          |          |
| • Простая CLI (`yc`) и Terraform‑provider                                         | • Локация only RU‑сегмент (не критично)  |          |
| AWS Free Tier                                                                     | + 12 мес. t2.micro, S3 5 GB              |          |

* Мировой лидирующий стек | – Нет бесплатного RDS Postgres > 750 часов/мес.
  – Карта US\$ блокируется банками РФ |
  \| VK Cloud | + Грант 3 000 ₽
* Аналогичные сервисы | – Меньше примеров, Terraform‑provider на ранней стадии |
  \| Selectel | + Дешёвые VM, Object Storage | – Нет managed Postgres; кластер K8s в бете |

**Вывод:** Yandex Cloud удовлетворяет всем требованиям и имеет самый крупный студенческий грант.

---

## 3. Выбранный стек Yandex Cloud

| Компонент (этап 1)      | Сервис YC               | Конфигурация (dev)                             | Стоимость/мес\*  |
| ----------------------- | ----------------------- | ---------------------------------------------- | ---------------- |
| Реляционная БД          | Managed PostgreSQL      | `s2.micro` (1 vCPU, 1 GB RAM) + SSD 10 GB      | **≈ 276 ₽**      |
| Объектное хранилище     | Object Storage Standard | 50 GB, публичный bucket                        | **≈ 85 ₽**       |
| Оркестратор контейнеров | Managed Kubernetes      | 1 нода `standard‑v1` (1 vCPU, 2 GB, 30 GB HDD) | **≈ 377 ₽**      |
| Registry                | Container Registry      | 1 GB хранения образов                          | **≈ 24 ₽**       |
| Сервис‑аккаунты & IAM   | IAM + Folder roles      | `editor`, `container‑registry.images.puller`   | 0 ₽              |
| **Итого**               |                         |                                                | **≈ 762 ₽/мес.** |

> \*Расчёт по прайс‑листу YC (май 2025). Детали приведены в приложении А.

Бюджет гранта 4 000 ₽ покрывает пять месяцев dev‑нагрузки (≈ 1524 ₽/60 дней < 4 000 ₽).

---

## 4. FinOps‑заметки

* **Idle‑time:** нода K8s простаивает ночью → планируем автоматическое выключение (schedule off) и экономим \~40 %.
* **HPA:** при тестах HPA создаёт ≤ 5 pod’ов; после пиковой нагрузки скейл‑даун до 1 pod.
* **Postgres:** можно начинать с 10 GB SSD; vertical‑scale до `s2.small` (2 GB) без простоя.
* **Object Storage:** при необходимости перейти на класс Cold (‑30 % цены) для старых изображений.
* **Terraform state:** хранится локально; при переходе в prod виним в YC Object Storage с версионированием.

---

## 5. Реализация выбора

* Аккаунт YC зарегистрирован, грант 4 000 ₽ активирован (скриншот №1).
* CLI `yc` настроен (`cloud‑id`: `b1g196jc…`, `folder‑id`: `b1g3upnn…`).
* В репозитории создан каталог `iac/` с файлами `providers.tf`, `variables.tf`, `main.tf`.
* `terraform plan` (см. `docs/plan_stage2.txt`) генерирует **9 ресурсов** и укладывается в грант.

---

## 6. Вывод

Выбранная платформа — **Yandex Cloud** — обеспечивает все необходимые сервисы и остаётся в бюджете студенческого гранта. Terraform‑конфигурация подготовлена, что гарантирует переносимость и контроль затрат. Этап 2 выполнен; переходим к детальной архитектурной документации (Этап 3).

---

