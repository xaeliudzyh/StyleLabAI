**Курс:** «Виртуализация и облачные технологии»

**Студент:** Цаголов Георгий, СП МКН, 3 курс

**Дата:** 15 мая 2025 г.

---

## 1. Проблема

Большинство клиентов салонов красоты затрудняются подобрать прическу, которая одновременно:

1. подходит к форме лица, структуре и цвету волос;
2. вписывается в их образ жизни и стиль одежды;
3. не требует недосягаемого времени на ежедневную укладку.

Это приводит к разочарованию после стрижки и дополнительным расходам на повторный визит.

## 2. Предлагаемое решение

Облачный сервис, который собирает анкету пользователя и с помощью ML‑модели мгновенно рекомендует стрижку, показывая примеры и советы по укладке.

### Поток данных

```
Пользователь ─→  Веб‑/моб. клиент ─→  REST API ─→  ML‑модель (inference)
                                                          ↓
                                 Postgres  ←─ CRUD         Объектное S3 (фото)
```

## 3. Сущности и CRUD‑операции

| Таблица/ресурс    | Назначение                         | Ключевые поля                                                 | Пример эндпоинтов                                                |
| ----------------- | ---------------------------------- | ------------------------------------------------------------- | ---------------------------------------------------------------- |
| `clients`         | Анкета пользователя                | возраст, форма лица, структура/длина/цвет волос, стиль и т.д. | `POST /clients`, `GET /clients/{id}`, `PUT`, `DELETE`            |
| `hairstyles`      | Каталог стрижек + фото             | название, изображение, теги                                   | `POST /hairstyles`, `GET /hairstyles/{id}`, …                    |
| `recommendations` | История выдач                      | client\_id, hairstyle\_id, модель, рейтинг                    | `POST /recommend`, `GET /recommend/{id}`                         |
| `users`           | Учётные записи и роли              | email, пароль (hash), роль                                    | `POST /users`, `GET /users/{id}`, `/auth/login`, `/auth/refresh` |
| `metrics`         | Опросники / параметры для обучения | user\_id, название метрики, значение                          | `POST /metrics`, `GET /users/{id}/metrics`                       |
| `barbershops`     | Партнёрские салоны и их профили    | название, адрес, контакты                                     | `POST /barbershops`, `GET /barbershops/{id}`                     |

> Авторизация реализуется через OAuth2 (JWT‑токены).

## 4. Облачные сервисы (на примере Yandex Cloud). Облачные сервисы (на примере Yandex Cloud)

| Сервис                          | Роль в проекте                                         | Причина выбора                                                               |
| ------------------------------- | ------------------------------------------------------ | ---------------------------------------------------------------------------- |
| **Managed PostgreSQL**          | Хранит анкеты и журнал рекомендаций                    | Реляционная БД с резервным копированием «из коробки»                         |
| **Object Storage (S3)**         | Снимки стрижек и аватары пользователей                 | S3‑API, дешёвое хранение, CDN‑выдача                                         |
| **Cloud Functions / K8s + HPA** | Контейнер с ML‑моделью, горизонтальное масштабирование | Позволяет платить только за время инференса и масштабироваться при росте RPS |

> Всем трём сервисам достаточно гранта 4 000 ₽/60 дней: расчёт стоимости приведён в приложении А.

## 5. Мини‑архитектура (логический уровень)

```
┌──────────────────────────┐    HTTPS    ┌────────────────────────┐
│  Web / Mobile Frontend   │───────────▶│      API Gateway        │
└──────────────────────────┘             └──────────┬─────────────┘
                                                   │
                                                   ▼
                                           ┌──────────────┐
                                           │  FastAPI      │  <-- stateless pods (K8s)
                                           └─────┬────────┘
                                                 │SQL
                                      ┌──────────▼───────────┐
                                      │ Managed PostgreSQL   │
                                      └──────────┬───────────┘
                                                 │S3 URL
                                        ┌────────▼────────┐
                                        │ Object Storage  │
                                        └─────────────────┘
                                                 ▲ gRPC/HTTP
                                       ML Function / Model Service
```

## 6. План запуска следующих этапов

1. **Регистрация и активация гранта YC** (до 24 мая).
2. Настройка репозитория, CI и Docker (до 31 мая).
3. Terraform → VPC, Postgres, S3, K8s (до 7 июня).
4. HPA, мониторинг Prometheus/Grafana (до 21 июня).

---

**Вывод.** Сервис решает реальную проблему выбора стрижки, использует облачные компоненты рационально и масштабируемо. Очередные этапы проекта сосредоточатся на автоматизации инфраструктуры и подключении ML‑модели.
